source ~/.dotfiles-local/tmux.conf

# unbind some default keybindings
unbind C-b

# set prefix key to ctrl-q
set -g prefix C-q
bind C-q send-prefix
bind q send-prefix

# set ` as command
bind '`' command-prompt

# make 256 colors work
set -g default-terminal "screen-256color"

# start first window and pane at 1, not zero
set-option -g base-index 1
set-window-option -g pane-base-index 3

# bind r to reloading the config file
bind r source-file ~/.tmux.conf \; display "Reloaded tmux config file."

# binding vi-like copy & paste
setw -g mode-keys vi

unbind [
bind Escape copy-mode

unbind p
bind p paste-buffer
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection

# bind left and right arrows to window switching
unbind Left
unbind Right

bind Left  previous-window
bind Right next-window

# also up arrow will now create a window and down arrow delete it
unbind Up
unbind Down
bind Up   new-window
bind Down confirm-before -p "kill-window #W? (y/n)" kill-window

# more intuitive keybindings for splitting
unbind %
bind h split-window -v
unbind '"'
bind v split-window -h
unbind x
bind-key x kill-pane

# load version-specific mouse config
if-shell "[[ `tmux -V` == tmux\\ 1.? ]]" 'source-file ~/dotfiles/tmux-1x.conf'
if-shell "[[ `tmux -V` == tmux\\ 2.? ]]" 'source-file ~/dotfiles/tmux-2x.conf'

# Layout options
# select-layout -g main-vertical # nice try, didn't work :-)
set-window-option -g main-pane-width 101
set-window-option -g display-panes-time 2500
set-window-option -g window-status-current-fg black
set-window-option -g window-status-current-bg yellow

# pane selection
bind ',' select-pane -L
bind '.' select-pane -R

# resize windows up as much as available :-)
set-window-option -g aggressive-resize on

# disabe window renaming
set-option -g allow-rename off

set-option -g history-limit 20000
set-option -g history-limit 20000
